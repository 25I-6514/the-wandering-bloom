<!DOCTYPE html>
<html lang="en">
<head>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Wandering Bloom - Shopping Cart</title>
</head>
<body>
    <!-- Fixed Header - Same as Other Pages -->
    <header class="main-header">
        <div class="rectangle">
            <div class="menu">
                <a href="home.html">HOME</a>
                <a href="categoriespage.html">CATEGORIES</a>
                <a href="topseller.html">TOP SELLERS</a>
                <a href="home.html#contact-section">CONTACT</a>
                <a href="home.html#about-section">ABOUT</a>
                <a href="Cart Page.html" class="cart-link">CART <span class="cart-badge">0</span></a>
            </div>
        </div>
        <div class="logo-section">
            <div class="logo">
                <span class="logo-icon">ðŸŒ¸</span>
                The Wandering Bloom
            </div>
            <p class="tagline">Curated Floral Excellence</p>
        </div>
    </header>

    <!-- Cart Content -->
    <div class="cart-container">
        <h1 style="color:#5A5A5A; font-family: 'Times New Roman'; text-align: center; margin-top: 40px;">
            The Wandering Bloom
        </h1>
        <h2 style="color:#5A5A5A; font-family: 'Times New Roman'; text-align: center; margin-bottom: 30px;">
            YOUR SHOPPING CART
        </h2>

        <div class="cart-menu">
            <span>Product</span>
            <span>Quantity</span>
            <span>Price</span>
            <span>Action</span>
        </div>
        
        <div>
            <hr class="line">
        </div>

        <div id="products" class="cart-box"></div>

        <div class="cart-total">
            <h3>Total: PKR <span id="total">0</span></h3>
        </div>

        <div class="empty-cart-message" id="empty-cart" style="display: none;">
            <div class="empty-cart-content">
                <div class="empty-cart-icon">ðŸŒ¸</div>
                <h3>Your cart is empty</h3>
                <p>Browse our collections to add beautiful floral arrangements</p>
                <a href="categoriespage.html" class="shop-now-btn">SHOP NOW</a>
            </div>
        </div>
    </div>

    <script>
        function displayCart() {
            let cart = JSON.parse(localStorage.getItem("cart")) || [];
            const box = document.getElementById("products");
            const totalSpan = document.getElementById("total");
            const emptyCart = document.getElementById("empty-cart");
            const cartBadge = document.querySelector('.cart-badge');

            // Update cart badge
            if (cartBadge) {
                cartBadge.textContent = cart.reduce((total, item) => total + item.quantity, 0);
            }

            if (cart.length === 0) {
                box.innerHTML = "";
                emptyCart.style.display = "block";
                totalSpan.textContent = "0";
                return;
            }

            emptyCart.style.display = "none";
            box.innerHTML = "";
            let total = 0;

            cart.forEach((item, index) => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;

                box.innerHTML += `
                <div class="cart-row">
                    <div class="cart-img">
                        <img src="${item.image || 'flower-default.jpg'}" alt="${item.name}" style="width:80px; height:80px; object-fit:cover;">
                    </div>

                    <div class="cart-info">
                        <p class="product-name">${item.name}</p>
                    </div>

                    <div class="qty-box">
                        <button onclick="updateQuantity(${index}, -1)">-</button>
                        <span>${item.quantity}</span>
                        <button onclick="updateQuantity(${index}, 1)">+</button>
                    </div>

                    <div class="price">PKR ${itemTotal}</div>

                    <div class="delete-button">
                        <button onclick="removeItem(${index})" class="delete-btn">Delete</button>
                    </div>
                </div>
                <hr class="line">
                `;
            });

            totalSpan.textContent = total;
        }

        function updateQuantity(index, change) {
            let cart = JSON.parse(localStorage.getItem("cart")) || [];

            cart[index].quantity += change;

            if (cart[index].quantity <= 0) {
                cart.splice(index, 1);
            }

            localStorage.setItem("cart", JSON.stringify(cart));
            displayCart();
        }

        function removeItem(index) {
            let cart = JSON.parse(localStorage.getItem("cart")) || [];
            cart.splice(index, 1);
            localStorage.setItem("cart", JSON.stringify(cart));
            displayCart();
        }

        window.onload = displayCart;
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
</body>
</html>
