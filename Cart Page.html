<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Wandering Bloom - Cart</title>
    <link rel="stylesheet" href="CSS Cart Page.css">
</head>
<body>
    <!-- Header -->
    <header class="main-header">
        <div class="rectangle">
            <div class="menu">
                <a href="home.html">HOME</a>
                <a href="categoriespage.html">CATEGORIES</a>
                <a href="topseller.html">TOP SELLERS</a>
                <a href="home.html#footer">CONTACT</a>
                <a href="home.html#footer">ABOUT</a>
                <a href="Cart Page.html" class="cart-link">CART <span class="cart-badge">0</span></a>
            </div>
        </div>
        <div class="logo-section">
            <div class="logo">
                <span class="logo-icon">ðŸŒ¸</span>
                The Wandering Bloom
            </div>
            <p class="tagline">Curated Floral Excellence</p>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <h1 style="text-align: center; margin: 40px 0 20px; color: var(--text-dark);">Your Shopping Cart</h1>
        
        <div class="cart-container">
            <div class="cart-table-container">
                <table class="cart-table" id="cartTable">
                    <thead>
                        <tr>
                            <th>Product</th>
                            <th>Price</th>
                            <th>Quantity</th>
                            <th>Subtotal</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Cart items will be inserted here by JavaScript -->
                    </tbody>
                </table>
            </div>

            <div class="cart-summary">
                <div class="summary-card">
                    <h3>Order Summary</h3>
                    <div class="summary-row">
                        <span>Subtotal:</span>
                        <span id="subtotal">PKR 0</span>
                    </div>
                    <div class="summary-row">
                        <span>Delivery:</span>
                        <span id="delivery">PKR 200</span>
                    </div>
                    <div class="summary-divider"></div>
                    <div class="summary-row total">
                        <span>Total:</span>
                        <span id="total">PKR 200</span>
                    </div>
                    <button class="checkout-btn" onclick="proceedToCheckout()">Proceed to Checkout</button>
                    <button class="continue-shopping" onclick="continueShopping()">Continue Shopping</button>
                </div>
            </div>
        </div>

        <div class="empty-cart-message" id="emptyMsg">
            <div class="empty-cart-icon">ðŸ›’</div>
            <h2>Your cart is empty</h2>
            <p>Looks like you haven't added any items to your cart yet.</p>
            <button class="continue-shopping" onclick="continueShopping()">Browse Products</button>
        </div>
    </div>

    <script>
        // Cart functionality
        let cart = JSON.parse(localStorage.getItem("cartItems")) || [];

        function displayCart() {
            const tableBody = document.querySelector('#cartTable tbody');
            const emptyMsg = document.getElementById('emptyMsg');
            const subtotalEl = document.getElementById('subtotal');
            const totalEl = document.getElementById('total');
            const deliveryEl = document.getElementById('delivery');

            // Clear table
            tableBody.innerHTML = '';

            if (cart.length === 0) {
                document.querySelector('.cart-container').style.display = 'none';
                emptyMsg.style.display = 'flex';
                updateCartBadge();
                return;
            }

            document.querySelector('.cart-container').style.display = 'flex';
            emptyMsg.style.display = 'none';

            let subtotal = 0;

            cart.forEach((item, index) => {
                const row = document.createElement('tr');
                const itemSubtotal = item.price * item.quantity;
                subtotal += itemSubtotal;

                row.innerHTML = `
                    <td class="product-cell">
                        <div class="product-info">
                            <img src="${item.image}" alt="${item.name}" class="product-image">
                            <div class="product-details">
                                <h4 class="product-name">${item.name}</h4>
                            </div>
                        </div>
                    </td>
                    <td class="price-cell">PKR ${item.price}</td>
                    <td class="quantity-cell">
                        <div class="quantity-controls">
                            <button class="quantity-btn" onclick="updateQuantity(${index}, ${item.quantity - 1})">-</button>
                            <span class="quantity-display">${item.quantity}</span>
                            <button class="quantity-btn" onclick="updateQuantity(${index}, ${item.quantity + 1})">+</button>
                        </div>
                    </td>
                    <td class="subtotal-cell">PKR ${itemSubtotal}</td>
                    <td class="action-cell">
                        <button class="remove-btn" onclick="removeItem(${index})">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                            </svg>
                            Remove
                        </button>
                    </td>
                `;

                tableBody.appendChild(row);
            });

            const delivery = 200;
            const total = subtotal + delivery;

            subtotalEl.textContent = `PKR ${subtotal}`;
            deliveryEl.textContent = `PKR ${delivery}`;
            totalEl.textContent = `PKR ${total}`;

            updateCartBadge();
            localStorage.setItem("totalBill", total);
        }

        function updateQuantity(index, newQuantity) {
            if (newQuantity < 1) {
                removeItem(index);
                return;
            }
            cart[index].quantity = newQuantity;
            saveCart();
            displayCart();
        }

        function removeItem(index) {
            cart.splice(index, 1);
            saveCart();
            displayCart();
        }

        function saveCart() {
            localStorage.setItem("cartItems", JSON.stringify(cart));
        }

        function updateCartBadge() {
            const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
            const badgeElements = document.querySelectorAll(".cart-badge");
            badgeElements.forEach(badge => {
                badge.textContent = totalItems;
            });
        }

        function proceedToCheckout() {
            if (cart.length === 0) {
                alert("Your cart is empty!");
                return;
            }
            window.location.href = "Payment Page.html";
        }

        function continueShopping() {
            window.location.href = "categoriespage.html";
        }

        // Initialize cart display
        document.addEventListener('DOMContentLoaded', function() {
            displayCart();
        });
    </script>
</body>
</html>

